<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PASIYA-MD AI SCHOOL | Dashboard</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', sans-serif; }

    body {
      background: radial-gradient(circle at top, #000, #111);
      color: #f0b90b;
      min-height: 100vh;
    }

    header {
      background: rgba(0, 0, 0, 0.9);
      padding: 25px;
      text-align: center;
      font-size: 26px;
      font-weight: 700;
      letter-spacing: 2px;
      border-bottom: 2px solid #f0b90b;
      text-shadow: 0 0 15px #f0b90b;
    }

    .container {
      padding: 50px 20px;
      text-align: center;
    }

    .grade-list {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 25px;
      margin-top: 40px;
    }

    .grade {
      background: #0b0b0b;
      border: 2px solid #f0b90b;
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 0 25px #f0b90b55;
      transition: 0.4s;
    }

    .grade:hover {
      transform: scale(1.05);
      box-shadow: 0 0 35px #f0b90b;
    }

    .grade h2 {
      margin-bottom: 10px;
      color: white;
      text-shadow: 0 0 10px #f0b90b;
    }

    .subject-btn {
      display: block;
      margin: 8px auto;
      background: #f0b90b;
      color: #000;
      border: none;
      padding: 10px 20px;
      border-radius: 30px;
      cursor: pointer;
      font-weight: 600;
      transition: 0.3s;
    }

    .subject-btn:hover {
      background: #000;
      color: #f0b90b;
      box-shadow: 0 0 15px #f0b90b;
    }

    #ai-panel {
      margin-top: 60px;
      border-top: 2px solid #f0b90b;
      padding-top: 30px;
    }

    textarea {
      width: 80%;
      max-width: 600px;
      height: 120px;
      padding: 15px;
      border: 2px solid #f0b90b;
      border-radius: 12px;
      background: #000;
      color: #fff;
      font-size: 16px;
      resize: none;
    }

    button.ask {
      background: #f0b90b;
      color: #000;
      border: none;
      padding: 12px 25px;
      margin-top: 20px;
      border-radius: 30px;
      font-weight: 600;
      cursor: pointer;
      box-shadow: 0 0 10px #f0b90b;
      transition: 0.3s;
    }

    button.ask:hover {
      background: #000;
      color: #f0b90b;
      box-shadow: 0 0 20px #f0b90b;
    }

    #response {
      margin-top: 30px;
      width: 80%;
      max-width: 700px;
      background: #111;
      border: 2px solid #f0b90b;
      border-radius: 10px;
      padding: 20px;
      color: #f0b90b;
      box-shadow: 0 0 20px #f0b90b55;
      text-align: left;
      margin-left: auto;
      margin-right: auto;
    }

    footer {
      text-align: center;
      padding: 30px;
      font-size: 14px;
      background: #000;
      border-top: 2px solid #f0b90b;
      margin-top: 50px;
    }

  </style>
</head>
<body>

  <header>PASIYA-MD AI SCHOOL | Dashboard</header>

  <div class="container">
    <h1>üìò Select Your Grade</h1>
    <p>Learn and ask AI questions by subject</p>

    <div class="grade-list" id="gradeList"></div>

    <div id="ai-panel">
      <h2>AI Learning Assistant ü§ñ</h2>
      <p id="selectedSubject">No subject selected</p>
      <textarea id="userInput" placeholder="Ask a question related to your subject..."></textarea><br>
      <button class="ask" onclick="askAI()">Ask AI</button>
      <div id="response"></div>
    </div>
  </div>

  <footer>
    POWERED BY PASIYA-MD TEAM | DEVELOPER: +94 76 635 9869
  </footer>

  <script>
    const subjectsByGrade = {
      1: ["Maths", "Environment", "Language"],
      2: ["Maths", "Science", "English"],
      3: ["Maths", "Sinhala", "Science", "ICT"],
      4: ["Mathematics", "Science", "English", "Buddhism"],
      5: ["Maths", "English", "Science", "History"],
      6: ["Maths", "Science", "Civics", "ICT"],
      7: ["Maths", "Science", "Geography", "ICT"],
      8: ["Maths", "Science", "Commerce", "History"],
      9: ["Maths", "Science", "Buddhism", "ICT"],
      10: ["Maths", "Science", "History", "Commerce"],
      11: ["Maths", "English", "ICT", "Civic Education"],
      12: ["Physics", "Chemistry", "Biology", "ICT", "Economics"],
      13: ["Combined Maths", "Physics", "Chemistry", "ICT", "Business Studies"]
    };

    const gradeListDiv = document.getElementById("gradeList");
    const selectedSubjectText = document.getElementById("selectedSubject");
    let currentSubject = null;

    for (let i = 1; i <= 13; i++) {
      const div = document.createElement("div");
      div.className = "grade";
      div.innerHTML = `<h2>Grade ${i}</h2>`;
      subjectsByGrade[i].forEach(sub => {
        const btn = document.createElement("button");
        btn.className = "subject-btn";
        btn.textContent = sub;
        btn.onclick = () => selectSubject(sub, i);
        div.appendChild(btn);
      });
      gradeListDiv.appendChild(div);
    }

    function selectSubject(subject, grade) {
      currentSubject = `Grade ${grade} - ${subject}`;
      selectedSubjectText.innerHTML = `<b>Selected:</b> ${currentSubject}`;
    }

    async function askAI() {
      const input = document.getElementById("userInput").value;
      const responseBox = document.getElementById("response");
      if (!currentSubject) {
        responseBox.innerHTML = "‚ö†Ô∏è Please select a subject first.";
        return;
      }
      responseBox.innerHTML = "<i>Thinking...</i>";

      const apiKey = "{AQ.Ab8RN6JT14b4cqUw7POMJ_BX-fRiWpTvAZ9AJ-x0LW3UhMxAZg}";
      const apiUrl = "https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=" + apiKey;

      const requestBody = {
        contents: [{ parts: [{ text: `You are a teacher for ${currentSubject}. ${input}` }] }]
      };

      try {
        const res = await fetch(apiUrl, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(requestBody)
        });
        const data = await res.json();
        const aiResponse = data?.candidates?.[0]?.content?.parts?.[0]?.text || "No response.";
        responseBox.innerHTML = `<b>AI:</b> ${aiResponse}`;
      } catch (err) {
        responseBox.innerHTML = "<b>Error:</b> " + err.message;
      }
    }
  </script>

</body>
</html>
